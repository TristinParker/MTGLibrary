/* Extracted styles from index-dev.html */
body {
  font-family: "Inter", sans-serif;
}
.card-image-container {
  position: relative;
  width: 100%;
  aspect-ratio: 2 / 3;
  overflow: hidden;
}
.collection-card-item {
  position: relative;
  display: block;
  aspect-ratio: 2 / 3;
  width: 100%;
  overflow: hidden;
  border-radius: 0.5rem;
}
.collection-card-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.commander-search-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.card-version-item {
  position: relative;
  display: block;
  aspect-ratio: 2 / 3;
  width: 100%;
  overflow: hidden;
  border-radius: 0.5rem;
  box-sizing: border-box;
  align-self: start;
}
.card-version-item img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}
.card-version-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}
#card-versions-grid {
  grid-auto-rows: auto;
  align-items: start;
  align-content: start;
}
#collection-content .grid {
  align-items: start;
  align-content: start;
}
.modal-backdrop > div {
  pointer-events: auto;
  z-index: 2;
}
.card-version-item { z-index: 0; }
.card-version-item img { z-index: 0; }
.card-version-item > div.absolute { z-index: 10; }
.select-commander-from-collection-btn { pointer-events: auto; }
.commander-select-btn {
  z-index: 50;
  pointer-events: auto;
}
.select-commander-from-search-btn:focus,
.select-commander-from-search-btn:active,
.select-commander-from-collection-btn:focus,
.select-commander-from-collection-btn:active {
  outline: 3px solid rgba(99,102,241,0.7);
  outline-offset: 4px;
}
@supports not (aspect-ratio: 1/1) {
  .card-version-item::before,
  .collection-card-item::before,
  .select-commander-from-search-btn::before {
    content: "";
    display: block;
    width: 100%;
    padding-top: 150%;
  }
}
.card-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.modal-backdrop {
  background-color: rgba(0, 0, 0, 0.75);
}
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
.delete-button { display: none; }
.edit-mode .delete-button { display: inline-flex; }
.group-header {
  background-color: #374151;
  color: #d1d5db;
  padding: 0.75rem 1.5rem;
  font-weight: bold;
  font-size: 1.25rem;
  margin-top: 1.5rem;
  border-bottom: 3px solid #4f46e5;
  position: sticky;
  top: 72px;
  z-index: 5;
}
.sortable { cursor: pointer; }
.sortable:hover { color: #a78bfa; }
.edit-mode .sortable { cursor: default; }
.edit-mode .sortable:hover { color: inherit; }
.sort-asc::after { content: " ▲"; font-size: 0.8em; }
.sort-desc::after { content: " ▼"; font-size: 0.8em; }
.card-modal-value-display { display: block; }
.card-modal-value-input { display: none; }
.card-modal-edit-mode .card-modal-value-display { display: none; }
.card-modal-edit-mode .card-modal-value-input { display: block; }
.oracle-text-truncate { overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; }
.kpi-gradient-bar { position: absolute; bottom: 0; left: 0; height: 4px; border-radius: 0 0 0.5rem 0.5rem; transition: width 0.5s ease-in-out; }
#toast-container { position: fixed; bottom: 1.5rem; right: 1.5rem; z-index: 100; display: flex; flex-direction: column; gap: 0.75rem; }
.toast { display: flex; align-items: center; padding: 1rem; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); min-width: 300px; max-width: 400px; transform: translateX(120%); animation: slideIn 0.5s forwards, slideOut 0.5s 4.5s forwards; }
@keyframes slideIn { from { transform: translateX(120%); } to { transform: translateX(0); } }
@keyframes slideOut { from { transform: translateX(0); } to { transform: translateX(120%); } }
details > summary { list-style: none; cursor: pointer; }
details > summary::-webkit-details-marker { display: none; }
details summary:before { content: "+"; margin-right: 0.5rem; font-weight: bold; }
details[open] summary:before { content: "-"; }

/* -----------------------------
   Mobile / Responsive overrides
   (Left pull-out nav drawer)
   -----------------------------
   These rules implement a left-side compact nav bar that stays narrow
   by default and expands when hovered or focused (via :hover / :focus-within).
   No HTML changes required. On small screens the nav overlays content when
   expanded and the main content reserves space for the collapsed bar.
*/
@media (max-width: 768px) {
  /* Keep main layout row-based; the nav becomes a fixed left drawer */
  #app-wrapper { flex-direction: row; height: auto; min-height: 100vh; }

  /* hide the native checkbox visually but keep it accessible */
  #nav-toggle { position: absolute; left: -9999px; }

  nav {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 220px; /* expanded width */
    overflow: auto;
    z-index: 9999; /* ensure nav is above content and scrollbars */
    transition: transform 240ms ease, box-shadow 220ms ease;
    transform: translateX(-100%); /* hide off-screen by default */
    box-shadow: 2px 0 6px rgba(0,0,0,0.4);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 0.75rem 1rem;
    background-color: #1f2937; /* preserve dark background */
  }

  /* Slide in when checkbox is checked (or on focus-within for keyboard) */
  #nav-toggle:checked + nav,
  nav:focus-within { transform: translateX(0); }

  /* Nav title hidden when collapsed; reveal when expanded */
  nav h1 { display: none; }
  nav:hover h1, nav:focus-within h1, #nav-toggle:checked + nav h1 { display: block; }

  /* Compact icon-only buttons when collapsed; show labels when expanded */
  .nav-link {
    display: flex !important;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem 0.75rem;
    width: 100%;
    justify-content: flex-start;
    font-size: 0; /* hide text nodes when collapsed */
  }
  .nav-link svg { width: 20px; height: 20px; }
  nav:hover .nav-link,
  nav:focus-within .nav-link,
  #nav-toggle:checked + nav .nav-link { font-size: 1rem; }

  /* Do not reserve space when hidden; content uses full width
    (nav overlays content when opened) */
  #app-wrapper > :not(nav) { margin-left: 0; width: 100%; }

  /* Toggle label inside nav (hamburger) */
  /* Fixed handle visible even when nav is hidden; placed at left edge near bottom */
  .nav-toggle-label {
    position: fixed;
    left: 8px;
    bottom: 12px;
    display: inline-flex;
    flex-direction: column;
    gap: 4px;
    width: 44px;
    height: 12px;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    padding: 8px 6px;
    z-index: 10001;
    background: rgba(255,255,255,0.03);
    border-radius: 8px;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
    touch-action: manipulation;
    pointer-events: auto;
  }
  .nav-toggle-label .bar {
    display: block;
    width: 18px;
    height: 2px;
    background: #cbd5e1; /* gray-300 */
    border-radius: 2px;
    transition: transform 180ms ease, opacity 180ms ease;
  }
  /* Visual change when open */
  /* Transform the fixed handle bars to an X when open */
  /* Transform the handle bars to an X when open */
  #nav-toggle:checked + nav .nav-toggle-label .bar:nth-child(1) { transform: translateY(6px) rotate(45deg); }
  #nav-toggle:checked + nav .nav-toggle-label .bar:nth-child(2) { opacity: 0; }
  #nav-toggle:checked + nav .nav-toggle-label .bar:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }

  /* Accessibility helper */
  .sr-only { position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

  /* Keep group-header offset as original header height (if present) */
  .group-header { top: 72px; }

  /* Make collection/deck grids fluid and card-friendly */
  #collection-content .grid,
  #decks-list,
  #collection-content .grid.grid-cols-1,
  #collection-content .grid.grid-cols-2,
  #collection-content .grid.grid-cols-3 {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)) !important;
    grid-auto-rows: auto;
    gap: 0.5rem !important;
  }

  /* Keep card aspect ratios reasonable on small screens */
  .card-image-container,
  .collection-card-item,
  .card-version-item { aspect-ratio: 2 / 3; }
  .collection-card-item { border-radius: 0.35rem; }

  /* Improve layout of stacked panels */
  .bg-gray-800.p-4.rounded-lg .flex { flex-direction: column; gap: 0.5rem; }

  /* Toasts should sit comfortably above bottom edge and be full width */
  #toast-container { right: 0.5rem; left: 0.5rem; bottom: 1rem; align-items: center; }
  .toast { min-width: unset; width: 100%; max-width: unset; transform: translateX(0); animation: none; }

  /* Login modal should be nearly full width on phones */
  #login-screen .max-w-sm { max-width: 95%; padding: 1rem; }

  /* Make tables horizontally scrollable on tiny screens */
  #collection-content table { width: 100%; display: block; overflow-x: auto; }

  /* Slightly larger touch targets */
  button, .nav-link, .collection-card-item { touch-action: manipulation; -webkit-tap-highlight-color: rgba(0,0,0,0); }
}

/* Decks grid and card sizing overrides
   - Use auto-fill to allow dynamic number of columns rather than fixed 3.
   - Cap the deck card width to the image natural aspect (so it won't stretch across the whole row).
   - Prevent images from being stretched vertically by enforcing aspect-ratio and object-fit.
*/
#decks-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 1rem;
  align-items: start;
}
.deck-card { display: flex; flex-direction: column; }
.deck-card .relative { width: 100%; }
.deck-card-img {
  width: 100%;
  height: auto;
  aspect-ratio: 3 / 1; /* keep the banner-style art from stretching vertically */
  object-fit: cover;
  display: block;
}

/* Limit the maximum width of a single deck card so it doesn't grow excessively on large screens */
.deck-card { max-width: 480px; }

/* Center grid when few items exist */
#decks-list:empty { justify-content: center; }


@media (max-width: 420px) {
  /* Slightly narrower collapsed width on very small screens */
  nav { width: 48px; }
  #app-wrapper > :not(nav) { margin-left: 48px; width: calc(100% - 48px); }
  .nav-link { min-height: 44px; }
  .group-header { font-size: 1.05rem; padding: 0.6rem 1rem; }
}

/* -----------------------------
   Decks list responsive & square images
   -----------------------------
   Use auto-fill grid so the number of columns adapts to viewport width
   and cap the card width so the deck art does not stretch. Enforce a
   square aspect ratio for the visible image area so the full square
   art is shown using object-fit: cover.
*/
/* Make cards larger (approx. twice previous) but cap at image source size.
   The placeholder/source art used elsewhere is 600x440; use that as our max.
*/
#decks-list {
  display: grid;
  /* larger min width so each card appears roughly twice size on wide screens */
  grid-template-columns: repeat(auto-fill, minmax(480px, 1fr));
  gap: 1rem;
  align-items: start;
}
.deck-card {
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 600px; /* cap to image source width */
}
.deck-card > .relative {
  position: relative;
  width: 100%;
  /* Allow natural image ratio (600x440 ~ 15:11) while capping height */
  aspect-ratio: 600 / 440;
  max-height: 440px; /* don't exceed source art height */
  overflow: hidden;
}
.deck-card-img {
  width: 100%;
  height: 100%;
  object-fit: cover; /* fill the container without distortion */
  display: block;
  max-width: 600px;
  max-height: 440px;
}

